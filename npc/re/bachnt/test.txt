-	script	Costume Drop	-1,{
	OnNPCKillEvent:
		if (BaseLevel >= 250)
		callfunc("onkilledllan",2,"ONLan1Killed"," Daﬁ T‚?u sinh Quest Quest 1");

	end;

	ONLan1Killed:
	getunitdata killedgid,.@data2;
		if (BaseLevel <= .@data2[UMOB_LEVEL]*11/10 && BaseLevel < 9999){
			BaseLevel = BaseLevel + rand(1,(.@data2[UMOB_LEVEL]*11/10 - BaseLevel)/10);
			percentheal 100,100;
		}
	
	if (rand(40000000) < .@data2[UMOB_ATKMIN]) {
		getitem 1002,1;
	}
	end;

end;	
}



function	script	onkilledllan	{
.idmob = killedrid;
getunitdata killedgid,.@data;
.@m$ = mapid2name(.@data[UMOB_MAPID]);
.@x = .@data[UMOB_X];
.@y = .@data[UMOB_Y];
.@lv = .@data[UMOB_LEVEL]*(.@data[UMOB_LEVEL]  + 250)/10 + 250;
.times = getarg(0) * .@lv;
monster .@m$,.@x,.@y,.@lv + getarg(2),.idmob,1,strnpcinfo(3) +"::" + getarg(1);
.GID = $@mobid[0];
.base = 10000 - .@lv;
.@name$ = "killthem";
setunitdata .GID,UMOB_TARGETID,.@data[UMOB_TARGETID];
setunitdata .GID,UMOB_LEVEL,.@lv;
setunitdata .GID,UMOB_MAXHP,(.@data[UMOB_MAXHP]/.@data[UMOB_LEVEL])*(10+.times)/10 + .@data[UMOB_MAXHP]*.times;
setunitdata .GID,UMOB_ATKMIN,.@data[UMOB_ATKMIN] + .times*8*.@lv/.base;
setunitdata .GID,UMOB_ATKMAX,.@data[UMOB_ATKMAX] + .times*20*.@lv/.base;
//setunitdata .GID,UMOB_BATK,.@data[UMOB_BATK] + .times*4*.@lv/.base;
setunitdata .GID,UMOB_SPEED,.@data[UMOB_SPEED];
setunitdata .GID,UMOB_MATK,.@data[UMOB_MATK] +.times*20*.@lv/.base;
setunitdata .GID,UMOB_DEF,.@data[UMOB_DEF] +.times;
setunitdata .GID,UMOB_MDEF,.@data[UMOB_MDEF] +.times;
setunitdata .GID,UMOB_HIT,.@data[UMOB_HIT]*2+ .@lv*130/100;
setunitdata .GID,UMOB_FLEE,.@data[UMOB_FLEE]*2 + .@lv*150/100;
setunitdata .GID,UMOB_PDODGE,.@data[UMOB_PDODGE]*(10+.times)/10;
setunitdata .GID,UMOB_CRIT,.@data[UMOB_CRIT]*(10+.times)/10;
setunitdata .GID,UMOB_RES,.@data[UMOB_RES]*(10+.times)/10 + .times/100;
setunitdata .GID,UMOB_MRES,.@data[UMOB_MRES]*(10+.times)/10 + .times/100;
getunitdata .GID,.@data2;

//message .@name$,">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>";
//message .@name$,"MobID: " + .idmob;
//message .@name$,"UMOB_LEVEL:  " + .@data[UMOB_LEVEL] + " --> " + .@data2[UMOB_LEVEL];
//message .@name$,"UMOB_MAXHP:  " + .@data[UMOB_MAXHP] + " --> " + .@data2[UMOB_MAXHP];
//message .@name$,"UMOB_ATKMIN:  " + .@data[UMOB_ATKMIN] + " --> " + .@data2[UMOB_ATKMIN];
//message .@name$,"UMOB_ATKMAX:  " + .@data[UMOB_ATKMAX] + " --> " + .@data2[UMOB_ATKMAX];
//message .@name$,"UMOB_BATK:  " + .@data[UMOB_BATK] + " --> " + .@data2[UMOB_BATK];
//message .@name$,"UMOB_MATKMAX:  " + .@data[UMOB_MATKMAX] + " --> " + .@data2[UMOB_MATKMAX];
//message .@name$,"UMOB_HIT:  " + .@data[UMOB_HIT] + " --> " + .@data2[UMOB_HIT];
//message .@name$,"UMOB_FLEE:  " + .@data[UMOB_FLEE] + " --> " + .@data2[UMOB_FLEE];
//message .@name$,"UMOB_MDEF:  " + .@data[UMOB_MDEF] + " --> " + .@data2[UMOB_MDEF];
//message .@name$,"UMOB_DEF:  " + .@data[UMOB_DEF] + " --> " + .@data2[UMOB_DEF];
//message .@name$,"UMOB_RES:  " + .@data[UMOB_RES] + " --> " + .@data2[UMOB_RES];
//message .@name$,"UMOB_MRES:  " + .@data[UMOB_MRES] + " --> " + .@data2[UMOB_MRES];
//message .@name$,"<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<";


}

